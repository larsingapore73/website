<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Extracting Data | Frictionless Data</title>
    <meta name="description" content="Bringing simplicity and gracefulness to the data experience">
    <script src="https://unpkg.com/honeycomb-grid@3.1.3"></script>
  <script src="https://unpkg.com/svg.js@2.7.1"></script>
    <meta property="og:image" content="/img/frictionless-color-logo.png"><meta name="twitter:image" content="/img/frictionless-color-logo.png"><meta property="og:url" content="/tooling/python/extracting-data/"><meta name="twitter:url" content="/tooling/python/extracting-data/"><meta property="og:title" content="Extracting Data"><meta name="twitter:title" content="Extracting Data"><meta itemprop="name" content="Extracting Data"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta property="og:site_name" content="Frictionless Data">
    <link rel="preload" href="/assets/css/0.styles.e2dc8718.css" as="style"><link rel="preload" href="/assets/js/app.dac55d52.js" as="script"><link rel="preload" href="/assets/js/5.ac1a1d5f.js" as="script"><link rel="preload" href="/assets/js/2.66881210.js" as="script"><link rel="preload" href="/assets/js/136.872f9580.js" as="script"><link rel="prefetch" href="/assets/js/10.15026140.js"><link rel="prefetch" href="/assets/js/100.ee50911c.js"><link rel="prefetch" href="/assets/js/101.09af496b.js"><link rel="prefetch" href="/assets/js/102.5c87bd2f.js"><link rel="prefetch" href="/assets/js/103.51aa9ae1.js"><link rel="prefetch" href="/assets/js/104.3b3b2f2a.js"><link rel="prefetch" href="/assets/js/105.bff34f6b.js"><link rel="prefetch" href="/assets/js/106.bde32528.js"><link rel="prefetch" href="/assets/js/107.9b3efd86.js"><link rel="prefetch" href="/assets/js/108.cee2d960.js"><link rel="prefetch" href="/assets/js/109.0d6048c8.js"><link rel="prefetch" href="/assets/js/11.80038541.js"><link rel="prefetch" href="/assets/js/110.78ef6a69.js"><link rel="prefetch" href="/assets/js/111.f9544c92.js"><link rel="prefetch" href="/assets/js/112.0d20ec75.js"><link rel="prefetch" href="/assets/js/113.58fa269d.js"><link rel="prefetch" href="/assets/js/114.8f0e6c6f.js"><link rel="prefetch" href="/assets/js/115.5982c548.js"><link rel="prefetch" href="/assets/js/116.fe9a56a4.js"><link rel="prefetch" href="/assets/js/117.0bd9d0f4.js"><link rel="prefetch" href="/assets/js/118.be0175bf.js"><link rel="prefetch" href="/assets/js/119.8bc52242.js"><link rel="prefetch" href="/assets/js/12.f6192af4.js"><link rel="prefetch" href="/assets/js/120.17117caf.js"><link rel="prefetch" href="/assets/js/121.decfec68.js"><link rel="prefetch" href="/assets/js/122.52f6e02e.js"><link rel="prefetch" href="/assets/js/123.ccb8d6b5.js"><link rel="prefetch" href="/assets/js/124.01ec7a9d.js"><link rel="prefetch" href="/assets/js/125.03905aaf.js"><link rel="prefetch" href="/assets/js/126.f1b3f504.js"><link rel="prefetch" href="/assets/js/127.d56aee48.js"><link rel="prefetch" href="/assets/js/128.64d982a1.js"><link rel="prefetch" href="/assets/js/129.2ae53db9.js"><link rel="prefetch" href="/assets/js/13.d58f4e1f.js"><link rel="prefetch" href="/assets/js/130.e913f258.js"><link rel="prefetch" href="/assets/js/131.33354cff.js"><link rel="prefetch" href="/assets/js/132.e915110e.js"><link rel="prefetch" href="/assets/js/133.f6972135.js"><link rel="prefetch" href="/assets/js/134.e5f5420c.js"><link rel="prefetch" href="/assets/js/135.4656f6e7.js"><link rel="prefetch" href="/assets/js/137.23abef60.js"><link rel="prefetch" href="/assets/js/138.5131ac41.js"><link rel="prefetch" href="/assets/js/139.16e6c5d8.js"><link rel="prefetch" href="/assets/js/14.f517a223.js"><link rel="prefetch" href="/assets/js/140.02046c48.js"><link rel="prefetch" href="/assets/js/141.23dfb425.js"><link rel="prefetch" href="/assets/js/142.2acf6d7b.js"><link rel="prefetch" href="/assets/js/143.30f66c2c.js"><link rel="prefetch" href="/assets/js/144.b26ed42d.js"><link rel="prefetch" href="/assets/js/145.40ce71aa.js"><link rel="prefetch" href="/assets/js/146.7587d20e.js"><link rel="prefetch" href="/assets/js/147.14f4dadd.js"><link rel="prefetch" href="/assets/js/148.3d35a6ec.js"><link rel="prefetch" href="/assets/js/149.c070a5a6.js"><link rel="prefetch" href="/assets/js/15.a040b21a.js"><link rel="prefetch" href="/assets/js/150.46ac2c8f.js"><link rel="prefetch" href="/assets/js/151.c2506c27.js"><link rel="prefetch" href="/assets/js/152.f042abed.js"><link rel="prefetch" href="/assets/js/153.9a20c53c.js"><link rel="prefetch" href="/assets/js/154.3bb9aa95.js"><link rel="prefetch" href="/assets/js/155.5eb59918.js"><link rel="prefetch" href="/assets/js/156.bca3e070.js"><link rel="prefetch" href="/assets/js/157.d9efe867.js"><link rel="prefetch" href="/assets/js/158.b369b71e.js"><link rel="prefetch" href="/assets/js/159.b8e9572a.js"><link rel="prefetch" href="/assets/js/16.ae7f9b74.js"><link rel="prefetch" href="/assets/js/160.3e107742.js"><link rel="prefetch" href="/assets/js/161.33becb5e.js"><link rel="prefetch" href="/assets/js/162.183f82c2.js"><link rel="prefetch" href="/assets/js/163.696aea14.js"><link rel="prefetch" href="/assets/js/164.3f835319.js"><link rel="prefetch" href="/assets/js/165.9773f43a.js"><link rel="prefetch" href="/assets/js/166.0f0a94b5.js"><link rel="prefetch" href="/assets/js/17.762b27ae.js"><link rel="prefetch" href="/assets/js/18.2323b7c9.js"><link rel="prefetch" href="/assets/js/19.1541160f.js"><link rel="prefetch" href="/assets/js/20.a1568074.js"><link rel="prefetch" href="/assets/js/21.370e0012.js"><link rel="prefetch" href="/assets/js/22.dd56cd77.js"><link rel="prefetch" href="/assets/js/23.1901184a.js"><link rel="prefetch" href="/assets/js/24.d0298a2d.js"><link rel="prefetch" href="/assets/js/25.53c78053.js"><link rel="prefetch" href="/assets/js/26.32620010.js"><link rel="prefetch" href="/assets/js/27.8a5578d0.js"><link rel="prefetch" href="/assets/js/28.ef5e237d.js"><link rel="prefetch" href="/assets/js/29.4f104860.js"><link rel="prefetch" href="/assets/js/3.06ca8e4c.js"><link rel="prefetch" href="/assets/js/30.6059fd52.js"><link rel="prefetch" href="/assets/js/31.06aa93d1.js"><link rel="prefetch" href="/assets/js/32.4adbdc71.js"><link rel="prefetch" href="/assets/js/33.3081de43.js"><link rel="prefetch" href="/assets/js/34.2f62a987.js"><link rel="prefetch" href="/assets/js/35.ecf050e0.js"><link rel="prefetch" href="/assets/js/36.032e7341.js"><link rel="prefetch" href="/assets/js/37.31244003.js"><link rel="prefetch" href="/assets/js/38.32715e06.js"><link rel="prefetch" href="/assets/js/39.d83cf27e.js"><link rel="prefetch" href="/assets/js/4.244cf990.js"><link rel="prefetch" href="/assets/js/40.fbb2db69.js"><link rel="prefetch" href="/assets/js/41.0624f5f2.js"><link rel="prefetch" href="/assets/js/42.6d5e6fff.js"><link rel="prefetch" href="/assets/js/43.ef8d519b.js"><link rel="prefetch" href="/assets/js/44.5c17b2c1.js"><link rel="prefetch" href="/assets/js/45.6da0f6fe.js"><link rel="prefetch" href="/assets/js/46.d3ed4c63.js"><link rel="prefetch" href="/assets/js/47.29bd6eee.js"><link rel="prefetch" href="/assets/js/48.484a66d3.js"><link rel="prefetch" href="/assets/js/49.c6d9b59d.js"><link rel="prefetch" href="/assets/js/50.aaf0b753.js"><link rel="prefetch" href="/assets/js/51.0f8960f8.js"><link rel="prefetch" href="/assets/js/52.98bdfb16.js"><link rel="prefetch" href="/assets/js/53.16161a02.js"><link rel="prefetch" href="/assets/js/54.f0b5bf68.js"><link rel="prefetch" href="/assets/js/55.e7de038c.js"><link rel="prefetch" href="/assets/js/56.bcbafa39.js"><link rel="prefetch" href="/assets/js/57.5046b94a.js"><link rel="prefetch" href="/assets/js/58.79eaba6c.js"><link rel="prefetch" href="/assets/js/59.b984eb3c.js"><link rel="prefetch" href="/assets/js/6.960c9796.js"><link rel="prefetch" href="/assets/js/60.2367f34e.js"><link rel="prefetch" href="/assets/js/61.0f20a566.js"><link rel="prefetch" href="/assets/js/62.fd59293e.js"><link rel="prefetch" href="/assets/js/63.e07fe7be.js"><link rel="prefetch" href="/assets/js/64.389b46ba.js"><link rel="prefetch" href="/assets/js/65.5b51887e.js"><link rel="prefetch" href="/assets/js/66.8f0412c0.js"><link rel="prefetch" href="/assets/js/67.49e62a40.js"><link rel="prefetch" href="/assets/js/68.ec6e8323.js"><link rel="prefetch" href="/assets/js/69.34a4998f.js"><link rel="prefetch" href="/assets/js/7.fafbb0ae.js"><link rel="prefetch" href="/assets/js/70.728a90bf.js"><link rel="prefetch" href="/assets/js/71.02867ecf.js"><link rel="prefetch" href="/assets/js/72.6af803b4.js"><link rel="prefetch" href="/assets/js/73.3da5b515.js"><link rel="prefetch" href="/assets/js/74.0fd80ae8.js"><link rel="prefetch" href="/assets/js/75.a2eb69a1.js"><link rel="prefetch" href="/assets/js/76.bc7e80da.js"><link rel="prefetch" href="/assets/js/77.ca59a310.js"><link rel="prefetch" href="/assets/js/78.0804486c.js"><link rel="prefetch" href="/assets/js/79.c3b2d176.js"><link rel="prefetch" href="/assets/js/8.0d594dcb.js"><link rel="prefetch" href="/assets/js/80.7d72241d.js"><link rel="prefetch" href="/assets/js/81.ca25a92a.js"><link rel="prefetch" href="/assets/js/82.0a649ed9.js"><link rel="prefetch" href="/assets/js/83.29f06a95.js"><link rel="prefetch" href="/assets/js/84.6cbc11a4.js"><link rel="prefetch" href="/assets/js/85.72902424.js"><link rel="prefetch" href="/assets/js/86.40cb6911.js"><link rel="prefetch" href="/assets/js/87.299e0a2a.js"><link rel="prefetch" href="/assets/js/88.e44184d3.js"><link rel="prefetch" href="/assets/js/89.204ac877.js"><link rel="prefetch" href="/assets/js/9.b5b2b4e4.js"><link rel="prefetch" href="/assets/js/90.99328a73.js"><link rel="prefetch" href="/assets/js/91.d6ce2917.js"><link rel="prefetch" href="/assets/js/92.fd4f11fe.js"><link rel="prefetch" href="/assets/js/93.0703472c.js"><link rel="prefetch" href="/assets/js/94.1bcaf3e8.js"><link rel="prefetch" href="/assets/js/95.bb132a8f.js"><link rel="prefetch" href="/assets/js/96.659bdedc.js"><link rel="prefetch" href="/assets/js/97.565f02f2.js"><link rel="prefetch" href="/assets/js/98.de64072f.js"><link rel="prefetch" href="/assets/js/99.332664c4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e2dc8718.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="banner w-full bg-yellow"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/frictionless-color-full-logo.svg" alt="Frictionless Data" class="logo"> <span class="site-name can-hide">Frictionless Data</span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tooling Menu" class="dropdown-title"><span class="title">Tooling</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tooling/application/" class="nav-link">Application</a></li><li class="dropdown-item"><!----> <a href="/tooling/python/" class="nav-link router-link-active">Framework (Python)</a></li><li class="dropdown-item"><!----> <a href="/tooling/javascript/" class="nav-link">Framework (JavaScript)</a></li><li class="dropdown-item"><!----> <a href="/tooling/libraries/" class="nav-link">Libraries</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tooling/goodtables/" class="nav-link">GoodTables</a></li><li class="dropdown-subitem"><a href="/tooling/datahub/" class="nav-link">DataHub</a></li><li class="dropdown-subitem"><a href="/tooling/labs/" class="nav-link">Labs</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Specs Menu" class="dropdown-title"><span class="title">Specs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://specs.frictionlessdata.io/table-schema/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Table Schema
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://specs.frictionlessdata.io/data-package/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Data Package
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Use Cases Menu" class="dropdown-title"><span class="title">Use Cases</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reproducible-research/" class="nav-link">Reproducible Research</a></li><li class="dropdown-item"><!----> <a href="/tag/case-studies/" class="nav-link">Case Studies</a></li><li class="dropdown-item"><!----> <a href="/tag/pilot/" class="nav-link">Pilots</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community Menu" class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://discordapp.com/invite/Sewv6av" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/frictionlessdata/forum/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/support/" class="nav-link">Support</a></li><li class="dropdown-item"><!----> <a href="/events/" class="nav-link">Events Calendar</a></li><li class="dropdown-item"><!----> <a href="/contribute/" class="nav-link">Contribute</a></li><li class="dropdown-item"><!----> <a href="/code-of-conduct/" class="nav-link">Code of Conduct</a></li></ul></div></div><div class="nav-item"><a href="/team/" class="nav-link">Team</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/blog/" class="nav-link">Blog</a></div> <!----></nav> <div class="search-box md:pl-4"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="https://discordapp.com/invite/Sewv6av" title="Discord" class="navbaricon"><img src="/img/home/discord-icon.svg" class="px-2 w-5 pt-4"></a> <a href="https://twitter.com/frictionlessd8a" title="Twitter" class="navbaricon"><img src="/img/home/twitter-icon.svg" class="px-2 w-5 pt-4"></a> <a href="https://github.com/frictionlessdata/project/" title="GitHub" class="navbaricon"><img src="/img/home/github-icon.svg" class="px-2 w-5 pt-4"></a></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tooling Menu" class="dropdown-title"><span class="title">Tooling</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tooling/application/" class="nav-link">Application</a></li><li class="dropdown-item"><!----> <a href="/tooling/python/" class="nav-link router-link-active">Framework (Python)</a></li><li class="dropdown-item"><!----> <a href="/tooling/javascript/" class="nav-link">Framework (JavaScript)</a></li><li class="dropdown-item"><!----> <a href="/tooling/libraries/" class="nav-link">Libraries</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tooling/goodtables/" class="nav-link">GoodTables</a></li><li class="dropdown-subitem"><a href="/tooling/datahub/" class="nav-link">DataHub</a></li><li class="dropdown-subitem"><a href="/tooling/labs/" class="nav-link">Labs</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Specs Menu" class="dropdown-title"><span class="title">Specs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://specs.frictionlessdata.io/table-schema/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Table Schema
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://specs.frictionlessdata.io/data-package/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Data Package
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Use Cases Menu" class="dropdown-title"><span class="title">Use Cases</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reproducible-research/" class="nav-link">Reproducible Research</a></li><li class="dropdown-item"><!----> <a href="/tag/case-studies/" class="nav-link">Case Studies</a></li><li class="dropdown-item"><!----> <a href="/tag/pilot/" class="nav-link">Pilots</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community Menu" class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://discordapp.com/invite/Sewv6av" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/frictionlessdata/forum/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/support/" class="nav-link">Support</a></li><li class="dropdown-item"><!----> <a href="/events/" class="nav-link">Events Calendar</a></li><li class="dropdown-item"><!----> <a href="/contribute/" class="nav-link">Contribute</a></li><li class="dropdown-item"><!----> <a href="/code-of-conduct/" class="nav-link">Code of Conduct</a></li></ul></div></div><div class="nav-item"><a href="/team/" class="nav-link">Team</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/blog/" class="nav-link">Blog</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Extracting Data</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tooling/python/extracting-data/#extract-functions" class="sidebar-link">Extract Functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#extracting-package" class="sidebar-link">Extracting Package</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#extracting-resource" class="sidebar-link">Extracting Resource</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#extracting-table" class="sidebar-link">Extracting Table</a></li></ul></li><li><a href="/tooling/python/extracting-data/#extraction-options" class="sidebar-link">Extraction Options</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#package-resource" class="sidebar-link">Package/Resource</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#table" class="sidebar-link">Table</a></li></ul></li><li><a href="/tooling/python/extracting-data/#using-package" class="sidebar-link">Using Package</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tooling/python/extracting-data/#using-resource" class="sidebar-link">Using Resource</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#exploring-data" class="sidebar-link">Exploring Data</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#reading-data" class="sidebar-link">Reading Data</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#streaming-data" class="sidebar-link">Streaming Data</a></li></ul></li><li><a href="/tooling/python/extracting-data/#using-table" class="sidebar-link">Using Table</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#exploring-data-2" class="sidebar-link">Exploring Data</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#reading-data-2" class="sidebar-link">Reading Data</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#streaming-data-2" class="sidebar-link">Streaming Data</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#table’s-lifecycle" class="sidebar-link">Table's Lifecycle</a></li></ul></li><li><a href="/tooling/python/extracting-data/#file-details" class="sidebar-link">File Details</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#scheme" class="sidebar-link">Scheme</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#format" class="sidebar-link">Format</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#hashing" class="sidebar-link">Hashing</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#encoding" class="sidebar-link">Encoding</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#compression" class="sidebar-link">Compression</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#compression-path" class="sidebar-link">Compression Path</a></li></ul></li><li><a href="/tooling/python/extracting-data/#file-control" class="sidebar-link">File Control</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#detect-encoding" class="sidebar-link">Detect Encoding</a></li></ul></li><li><a href="/tooling/python/extracting-data/#table-dialect" class="sidebar-link">Table Dialect</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#header" class="sidebar-link">Header</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#header-rows" class="sidebar-link">Header Rows</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#header-join" class="sidebar-link">Header Join</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#header-case" class="sidebar-link">Header Case</a></li></ul></li><li><a href="/tooling/python/extracting-data/#table-query" class="sidebar-link">Table Query</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#pick-skip-fields" class="sidebar-link">Pick/Skip Fields</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#limit-offset-fields" class="sidebar-link">Limit/Offset Fields</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#pick-skip-rows" class="sidebar-link">Pick/Skip Rows</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#limit-offset-rows" class="sidebar-link">Limit/Offset Rows</a></li></ul></li><li><a href="/tooling/python/extracting-data/#header-options" class="sidebar-link">Header Options</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tooling/python/extracting-data/#schema-options" class="sidebar-link">Schema Options</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#schema" class="sidebar-link">Schema</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#sync-schema" class="sidebar-link">Sync Schema</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#patch-schema" class="sidebar-link">Patch Schema</a></li></ul></li><li><a href="/tooling/python/extracting-data/#integrity-options" class="sidebar-link">Integrity Options</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#on-error" class="sidebar-link">On Error</a></li><li class="sidebar-sub-header"><a href="/tooling/python/extracting-data/#lookup" class="sidebar-link">Lookup</a></li></ul></li><li><a href="/tooling/python/extracting-data/#header-object" class="sidebar-link">Header Object</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/tooling/python/extracting-data/#row-object" class="sidebar-link">Row Object</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="extracting-data"><a href="#extracting-data" class="header-anchor">#</a> Extracting Data</h1> <p>Extracting data means reading tabular data from some source. We can use various customizations for this process such as providing a file format, table schema, limiting fields or rows amount, and much more. Let’s see this with real files:</p> <div class="language-python extra-class"><pre class="language-python"><code>! cat data<span class="token operator">/</span>country<span class="token operator">-</span><span class="token number">3.</span>csv
</code></pre></div><pre><code>id,capital_id,name,population
1,1,Britain,67
2,3,France,67
3,2,Germany,83
4,5,Italy,60
5,4,Spain,47
</code></pre> <div class="language-python extra-class"><pre class="language-python"><code>! cat data<span class="token operator">/</span>capital<span class="token operator">-</span><span class="token number">3.</span>csv
</code></pre></div><pre><code>id,name
1,London
2,Berlin
3,Paris
4,Madrid
5,Rome
</code></pre> <p>For a starter, we will use the command-line interface:</p> <div class="language-python extra-class"><pre class="language-python"><code>! frictionless extract data<span class="token operator">/</span>country<span class="token operator">-</span><span class="token number">3.</span>csv
</code></pre></div><pre><code>---
data: data/country-3.csv
---
==  ==========  =======  ==========
id  capital_id  name     population
==  ==========  =======  ==========
 1           1  Britain          67
 2           3  France           67
 3           2  Germany          83
 4           5  Italy            60
 5           4  Spain            47
==  ==========  =======  ==========
</code></pre> <p>The same can be done in Python:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> pprint <span class="token keyword">import</span> pprint
<span class="token keyword">from</span> frictionless <span class="token keyword">import</span> extract
rows <span class="token operator">=</span> extract<span class="token punctuation">(</span><span class="token string">'data/country-3.csv'</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>rows<span class="token punctuation">)</span>
</code></pre></div><pre><code>[Row([('id', 1), ('capital_id', 1), ('name', 'Britain'), ('population', 67)]),
 Row([('id', 2), ('capital_id', 3), ('name', 'France'), ('population', 67)]),
 Row([('id', 3), ('capital_id', 2), ('name', 'Germany'), ('population', 83)]),
 Row([('id', 4), ('capital_id', 5), ('name', 'Italy'), ('population', 60)]),
 Row([('id', 5), ('capital_id', 4), ('name', 'Spain'), ('population', 47)])]
</code></pre> <h2 id="extract-functions"><a href="#extract-functions" class="header-anchor">#</a> Extract Functions</h2> <p>The high-level interface for extracting data provided by Frictionless is a set of <code>extract</code> functions:</p> <ul><li><code>extract</code>: it will detect the source type and extract data accordingly</li> <li><code>extract_package</code>: it accepts a package descriptor and returns a map of the package’s tables</li> <li><code>extract_resource</code>: it accepts a resource descriptor and returns a table data</li> <li><code>extract_table</code>: it accepts various tabular options and returns a table data</li></ul> <p>In command-line, there is only 1 command but there is a flag to adjust the behavior:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ frictionless extract
$ frictionless extract --source-type package
$ frictionless extract --source-type resource
$ frictionless extract --source-type table
</code></pre></div><p>The <code>extract</code> functions always read data in a form of rows (see the object description below) into memory. The lower-level interfaces will allow you to stream data and various output forms.</p> <h3 id="extracting-package"><a href="#extracting-package" class="header-anchor">#</a> Extracting Package</h3> <p>Let’s start by using the command line-interface. We’re going to provide two files to the <code>extract</code> command which will be enough to detect that it’s a dataset:</p> <div class="language-python extra-class"><pre class="language-python"><code>! frictionless extract data<span class="token operator">/</span><span class="token operator">*</span><span class="token operator">-</span><span class="token number">3.</span>csv
</code></pre></div><pre><code>---
data: data/capital-3.csv
---
==  ======
id  name
==  ======
 1  London
 2  Berlin
 3  Paris
 4  Madrid
 5  Rome
==  ======
---
data: data/country-3.csv
---
==  ==========  =======  ==========
id  capital_id  name     population
==  ==========  =======  ==========
 1           1  Britain          67
 2           3  France           67
 3           2  Germany          83
 4           5  Italy            60
 5           4  Spain            47
==  ==========  =======  ==========
</code></pre> <p>In Python we can do the same by providing a glob for the <code>extract</code> function, but instead we will use <code>extract_package</code> by providing a package descriptor:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> extract_package
data <span class="token operator">=</span> extract_package<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'resources'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'path'</span><span class="token punctuation">:</span> <span class="token string">'data/country-3.csv'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'path'</span><span class="token punctuation">:</span> <span class="token string">'data/capital-3.csv'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> path<span class="token punctuation">,</span> rows <span class="token keyword">in</span> data<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>path<span class="token punctuation">)</span>
  pprint<span class="token punctuation">(</span>rows<span class="token punctuation">)</span>
</code></pre></div><pre><code>'data/country-3.csv'
[Row([('id', 1), ('capital_id', 1), ('name', 'Britain'), ('population', 67)]),
 Row([('id', 2), ('capital_id', 3), ('name', 'France'), ('population', 67)]),
 Row([('id', 3), ('capital_id', 2), ('name', 'Germany'), ('population', 83)]),
 Row([('id', 4), ('capital_id', 5), ('name', 'Italy'), ('population', 60)]),
 Row([('id', 5), ('capital_id', 4), ('name', 'Spain'), ('population', 47)])]
'data/capital-3.csv'
[Row([('id', 1), ('name', 'London')]),
 Row([('id', 2), ('name', 'Berlin')]),
 Row([('id', 3), ('name', 'Paris')]),
 Row([('id', 4), ('name', 'Madrid')]),
 Row([('id', 5), ('name', 'Rome')])]
</code></pre> <h3 id="extracting-resource"><a href="#extracting-resource" class="header-anchor">#</a> Extracting Resource</h3> <p>A resource contains only one file and for extracting a resource we can use the same approach we used above but providing only one file. We will extract data using a metadata descriptor:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> extract_resource
rows <span class="token operator">=</span> extract_resource<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'path'</span><span class="token punctuation">:</span> <span class="token string">'data/capital-3.csv'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>rows<span class="token punctuation">)</span>
</code></pre></div><pre><code>[Row([('id', 1), ('name', 'London')]),
 Row([('id', 2), ('name', 'Berlin')]),
 Row([('id', 3), ('name', 'Paris')]),
 Row([('id', 4), ('name', 'Madrid')]),
 Row([('id', 5), ('name', 'Rome')])]
</code></pre> <p>Usually, the code above doesn’t really make sense as we can just provide a path to the high-level <code>extract</code> function instead of a descriptor to the <code>extract_resource</code> function but the power of the descriptor is that it can contain different metadata and be stored on the disc. Let’s extend our example:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Resource
resource <span class="token operator">=</span> Resource<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">)</span>
resource<span class="token punctuation">.</span>schema<span class="token punctuation">.</span>missing_values<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span>
resource<span class="token punctuation">.</span>to_yaml<span class="token punctuation">(</span><span class="token string">'tmp/capital.resource.yaml'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>! frictionless extract tmp<span class="token operator">/</span>capital<span class="token punctuation">.</span>resource<span class="token punctuation">.</span>yaml <span class="token operator">-</span><span class="token operator">-</span>basepath <span class="token punctuation">.</span>
</code></pre></div><pre><code>---
data: tmp/capital.resource.yaml
---
====  ======
id    name
====  ======
   1  London
   2  Berlin
None  Paris
   4  Madrid
   5  Rome
====  ======
</code></pre> <p>So what’s happened? We set textual representation of the number “3” to be a missing value. It was done only for the presentational purpose because it’s definitely not a missing value. On the other hand, it demonstrated how metadata can be used.</p> <h3 id="extracting-table"><a href="#extracting-table" class="header-anchor">#</a> Extracting Table</h3> <p>While the package and resource concepts contain both data and metadata, a table is solely data. Because of this fact we can provide many more options to the <code>extract_table</code> function. Most of these options are encapsulated into the resource descriptor as we saw with the <code>missingValues</code> example above. We will reproduce it:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> extract_table
rows <span class="token operator">=</span> extract_table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> patch_schema<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'missingValues'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>rows<span class="token punctuation">)</span>
</code></pre></div><pre><code>[Row([('id', 1), ('name', 'London')]),
 Row([('id', 2), ('name', 'Berlin')]),
 Row([('id', None), ('name', 'Paris')]),
 Row([('id', 4), ('name', 'Madrid')]),
 Row([('id', 5), ('name', 'Rome')])]
</code></pre> <p>We got an identical result but it’s important to understand that on the table level we need to provide all the metadata options separately while a resource encapsulate all these metadata. Please check the <code>extract_table</code> API Reference as it has a lot of options. We’re going to discuss some of them below.</p> <h2 id="extraction-options"><a href="#extraction-options" class="header-anchor">#</a> Extraction Options</h2> <p>All the <code>extract</code> fuctions accept those common argument:</p> <ul><li><code>process</code>: it’s a function getting a row object and returning whatever is needed as an ouput of the data extraction e.g. <code>lambda row: row.to_dict()</code></li> <li><code>stream</code>: instead of reading all the data into memory it will return row stream(s)</li></ul> <h3 id="package-resource"><a href="#package-resource" class="header-anchor">#</a> Package/Resource</h3> <p>These <code>extract</code> functions doesn’t accept any additional arguments.</p> <h3 id="table"><a href="#table" class="header-anchor">#</a> Table</h3> <p>We will take a look at all the <code>extract_table</code> options in the sections below. As an overview, it accepts:</p> <ul><li>File Details</li> <li>File Control</li> <li>Table Dialect</li> <li>Table Query</li> <li>Header Options</li> <li>Schema Options</li> <li>Integrity Options</li> <li>Infer Options (see “Describing Data”)</li></ul> <h2 id="using-package"><a href="#using-package" class="header-anchor">#</a> Using Package</h2> <p>The Package class is a metadata class which provides an ability to read its contents. First of all, let’s create a package descriptor:</p> <div class="language-python extra-class"><pre class="language-python"><code>! frictionless describe data<span class="token operator">/</span><span class="token operator">*</span><span class="token operator">-</span><span class="token number">3.</span>csv <span class="token operator">-</span><span class="token operator">-</span>json <span class="token operator">&gt;</span> tmp<span class="token operator">/</span>country<span class="token punctuation">.</span>package<span class="token punctuation">.</span>json
</code></pre></div><p>Now, we can open the created descriptor and read the package’s resources:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Package
package <span class="token operator">=</span> Package<span class="token punctuation">(</span><span class="token string">'tmp/country.package.json'</span><span class="token punctuation">,</span> basepath<span class="token operator">=</span><span class="token string">'.'</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>package<span class="token punctuation">.</span>get_resource<span class="token punctuation">(</span><span class="token string">'country-3'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>package<span class="token punctuation">.</span>get_resource<span class="token punctuation">(</span><span class="token string">'capital-3'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>[Row([('id', 1), ('capital_id', 1), ('name', 'Britain'), ('population', 67)]),
 Row([('id', 2), ('capital_id', 3), ('name', 'France'), ('population', 67)]),
 Row([('id', 3), ('capital_id', 2), ('name', 'Germany'), ('population', 83)]),
 Row([('id', 4), ('capital_id', 5), ('name', 'Italy'), ('population', 60)]),
 Row([('id', 5), ('capital_id', 4), ('name', 'Spain'), ('population', 47)])]
[Row([('id', 1), ('name', 'London')]),
 Row([('id', 2), ('name', 'Berlin')]),
 Row([('id', 3), ('name', 'Paris')]),
 Row([('id', 4), ('name', 'Madrid')]),
 Row([('id', 5), ('name', 'Rome')])]
</code></pre> <p>The package by itself doesn’t provide any read functions directly as it’s a role of its resources. So everything written below for the Resource class can be used within a package.</p> <h2 id="using-resource"><a href="#using-resource" class="header-anchor">#</a> Using Resource</h2> <p>The Resource class is also a metadata class which provides various read and stream functions. Let’s create a resource descriptor:</p> <div class="language-python extra-class"><pre class="language-python"><code>! frictionless describe data<span class="token operator">/</span>country<span class="token operator">-</span><span class="token number">3.</span>csv <span class="token operator">-</span><span class="token operator">-</span>json <span class="token operator">&gt;</span> tmp<span class="token operator">/</span>country<span class="token punctuation">.</span>resource<span class="token punctuation">.</span>json
</code></pre></div><h3 id="exploring-data"><a href="#exploring-data" class="header-anchor">#</a> Exploring Data</h3> <p>There are various functions to help explore your resource, such as checking a header or other attributes like stats:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Resource
resource <span class="token operator">=</span> Resource<span class="token punctuation">(</span><span class="token string">'tmp/country.resource.json'</span><span class="token punctuation">,</span> basepath<span class="token operator">=</span><span class="token string">'.'</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_header<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_sample<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_stats<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>['id', 'capital_id', 'name', 'population']
[['1', '1', 'Britain', '67'],
 ['2', '3', 'France', '67'],
 ['3', '2', 'Germany', '83'],
 ['4', '5', 'Italy', '60'],
 ['5', '4', 'Spain', '47']]
{'bytes': 100,
 'fields': 4,
 'hash': 'c0558b91523683483f86f63346d06d81',
 'rows': 5}
</code></pre> <h3 id="reading-data"><a href="#reading-data" class="header-anchor">#</a> Reading Data</h3> <p>The <code>extract</code> functions always read rows into memory; Resource can do the same but it also gives a choice regarding ouput data. It can be <code>rows</code>, <code>data</code>, <code>text</code>, or <code>bytes</code>. Let’s try reading all of them:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Resource
resource <span class="token operator">=</span> Resource<span class="token punctuation">(</span><span class="token string">'tmp/country.resource.json'</span><span class="token punctuation">,</span> basepath<span class="token operator">=</span><span class="token string">'.'</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_bytes<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_data<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>(b'id,capital_id,name,population\n1,1,Britain,67\n2,3,France,67\n3,2,Germany,8'
 b'3\n4,5,Italy,60\n5,4,Spain,47\n')
('id,capital_id,name,population\n'
 '1,1,Britain,67\n'
 '2,3,France,67\n'
 '3,2,Germany,83\n'
 '4,5,Italy,60\n'
 '5,4,Spain,47\n')
[['1', '1', 'Britain', '67'],
 ['2', '3', 'France', '67'],
 ['3', '2', 'Germany', '83'],
 ['4', '5', 'Italy', '60'],
 ['5', '4', 'Spain', '47']]
[Row([('id', 1), ('capital_id', 1), ('name', 'Britain'), ('population', 67)]),
 Row([('id', 2), ('capital_id', 3), ('name', 'France'), ('population', 67)]),
 Row([('id', 3), ('capital_id', 2), ('name', 'Germany'), ('population', 83)]),
 Row([('id', 4), ('capital_id', 5), ('name', 'Italy'), ('population', 60)]),
 Row([('id', 5), ('capital_id', 4), ('name', 'Spain'), ('population', 47)])]
</code></pre> <h3 id="streaming-data"><a href="#streaming-data" class="header-anchor">#</a> Streaming Data</h3> <p>It’s really handy to read all your data into memory but it’s not always possible as a file can be really big. For such cases, Frictionless provides streaming functions:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Resource
resource <span class="token operator">=</span> Resource<span class="token punctuation">(</span><span class="token string">'tmp/country.resource.json'</span><span class="token punctuation">,</span> basepath<span class="token operator">=</span><span class="token string">'.'</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_byte_stream<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_text_stream<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_data_stream<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>resource<span class="token punctuation">.</span>read_row_stream<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> resource<span class="token punctuation">.</span>read_row_stream<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span>
</code></pre></div><pre><code>&lt;frictionless.loader.ByteStreamWithStatsHandling object at 0x7fe7e3664910&gt;
&lt;_io.TextIOWrapper name='./data/country-3.csv' encoding='utf-8'&gt;
&lt;generator object Resource.read_data_stream at 0x7fe7e3c93a50&gt;
&lt;generator object Resource.read_row_stream at 0x7fe7e3c93a50&gt;
Row([('id', 1), ('capital_id', 1), ('name', 'Britain'), ('population', 67)])
Row([('id', 2), ('capital_id', 3), ('name', 'France'), ('population', 67)])
Row([('id', 3), ('capital_id', 2), ('name', 'Germany'), ('population', 83)])
Row([('id', 4), ('capital_id', 5), ('name', 'Italy'), ('population', 60)])
Row([('id', 5), ('capital_id', 4), ('name', 'Spain'), ('population', 47)])
</code></pre> <h2 id="using-table"><a href="#using-table" class="header-anchor">#</a> Using Table</h2> <p>The Table class is at the heart of all the tabular capabilities of Frictionless. It’s used by all the higher-level classes and provides a comprehensive user interface by itself. The main difference with, for example, Resource class is that Table has a state of a lower-level file descriptor and needs to be opened and closed. Usually we use a context manager (the <code>with</code> keyword) to work with Table. In-general, Table is a streaming interface that needs to be re-opened if data is already read.</p> <h3 id="exploring-data-2"><a href="#exploring-data-2" class="header-anchor">#</a> Exploring Data</h3> <p>First of all, let’s take a look at the file details information:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Source: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>source<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Scheme: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>scheme<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Format: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Hashing: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>hashing<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Encoding: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>encoding<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Compression: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>compression<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Compression Path: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>compression_path<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
</code></pre></div><pre><code>Source: &quot;data/capital-3.csv&quot;
Scheme: &quot;file&quot;
Format: &quot;csv&quot;
Hashing: &quot;md5&quot;
Encoding: &quot;utf-8&quot;
Compression: &quot;no&quot;
Compression Path: &quot;&quot;
</code></pre> <p>There is much more information available; we will explain some of it later in the sections below:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Control: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>control<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Dialect: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>dialect<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Query: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>query<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Header: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Schema: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>schema<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Sample: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>sample<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Stats: &quot;</span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>stats<span class="token punctuation">}</span></span><span class="token string">&quot;'</span></span><span class="token punctuation">)</span>
</code></pre></div><pre><code>Control: &quot;{'newline': ''}&quot;
Dialect: &quot;{}&quot;
Query: &quot;{}&quot;
Header: &quot;['id', 'name']&quot;
Schema: &quot;{'fields': [{'name': 'id', 'type': 'integer'}, {'name': 'name', 'type': 'string'}]}&quot;
Sample: &quot;[['1', 'London'], ['2', 'Berlin'], ['3', 'Paris'], ['4', 'Madrid'], ['5', 'Rome']]&quot;
Stats: &quot;{'hash': 'e7b6592a0a4356ba834e4bf1c8e8c7f8', 'bytes': 50, 'fields': 2, 'rows': 0}&quot;
</code></pre> <p>Many of the properties above not only can be read from the existent Table but also can be provided as an option to alter the Table behaviour, for example:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> scheme<span class="token operator">=</span><span class="token string">'file'</span><span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>source<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>scheme<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>data/capital-3.csv
file
csv
</code></pre> <h3 id="reading-data-2"><a href="#reading-data-2" class="header-anchor">#</a> Reading Data</h3> <p>There are 2 different types of ouput that Table can produce:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_data<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>[['1', 'London'],
 ['2', 'Berlin'],
 ['3', 'Paris'],
 ['4', 'Madrid'],
 ['5', 'Rome']]
[Row([('id', 1), ('name', 'London')]),
 Row([('id', 2), ('name', 'Berlin')]),
 Row([('id', 3), ('name', 'Paris')]),
 Row([('id', 4), ('name', 'Madrid')]),
 Row([('id', 5), ('name', 'Rome')])]
</code></pre> <p>The <code>data</code> format is just a raw array of arrays similiar to JSON while the <code>row</code> format is a rich object with all the cells normalized and converted to proper types. We will explore the Row class later.</p> <h3 id="streaming-data-2"><a href="#streaming-data-2" class="header-anchor">#</a> Streaming Data</h3> <p>It was mentioned for Resource and it’s the same for Table, we can stream our tabular data. The core difference is that Table is stateful so we use properties instead of the read functions:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>data_stream<span class="token punctuation">)</span>
  <span class="token keyword">for</span> cells <span class="token keyword">in</span> table<span class="token punctuation">.</span>data_stream<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>cells<span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>row_stream<span class="token punctuation">)</span>
  <span class="token keyword">for</span> row <span class="token keyword">in</span> table<span class="token punctuation">.</span>row_stream<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span>
</code></pre></div><pre><code>&lt;generator object Table.__read_data_stream_create at 0x7fe7fd726c10&gt;
['1', 'London']
['2', 'Berlin']
['3', 'Paris']
['4', 'Madrid']
['5', 'Rome']
&lt;generator object Table.__read_row_stream_create at 0x7fe7fd726900&gt;
Row([('id', 1), ('name', 'London')])
Row([('id', 2), ('name', 'Berlin')])
Row([('id', 3), ('name', 'Paris')])
Row([('id', 4), ('name', 'Madrid')])
Row([('id', 5), ('name', 'Rome')])
</code></pre> <h3 id="table’s-lifecycle"><a href="#table’s-lifecycle" class="header-anchor">#</a> Table’s Lifecycle</h3> <p>You might have noticed that we had to duplicate the <code>with Table(...)</code> statement in some examples. The reason is that Table is a streaming interface. Once it’s read you need to open it again. Let’s show it in an example:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
table <span class="token operator">=</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">)</span>
table<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># We need to re-open: there is no data left</span>
table<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># We need to close manually: not context manager is used</span>
table<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>[Row([('id', 1), ('name', 'London')]),
 Row([('id', 2), ('name', 'Berlin')]),
 Row([('id', 3), ('name', 'Paris')]),
 Row([('id', 4), ('name', 'Madrid')]),
 Row([('id', 5), ('name', 'Rome')])]
[]
[Row([('id', 1), ('name', 'London')]),
 Row([('id', 2), ('name', 'Berlin')]),
 Row([('id', 3), ('name', 'Paris')]),
 Row([('id', 4), ('name', 'Madrid')]),
 Row([('id', 5), ('name', 'Rome')])]
</code></pre> <h2 id="file-details"><a href="#file-details" class="header-anchor">#</a> File Details</h2> <p>Let’s overview the details we can specify for a file. Usually you don’t need to provide those details as Frictionless is capable to infer it on its own. Although, there are situation when you need to specify it manually. The following example will use the <code>Table</code> class but the same options can be used for the <code>extract</code> and <code>extract_table</code> functions.</p> <h3 id="scheme"><a href="#scheme" class="header-anchor">#</a> Scheme</h3> <p>The scheme also know as protocol indicates which loader Frictionless should use to read or write data. It can be <code>file</code> (default), <code>text</code>, <code>http</code>, <code>https</code>, <code>s3</code>, and others.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'header1,header2\nvalue1,value2.csv'</span><span class="token punctuation">,</span> scheme<span class="token operator">=</span><span class="token string">'text'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>scheme<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>text
[Row([('header1', 'value1'), ('header2', 'value2.csv')])]
</code></pre> <h3 id="format"><a href="#format" class="header-anchor">#</a> Format</h3> <p>The format or as it’s also called extension helps Frictionless to choose a proper parser to handle the file. Popular formats are <code>csv</code>, <code>xlsx</code>, <code>json</code> and others</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'text://header1,header2\nvalue1,value2.csv'</span><span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>csv
[Row([('header1', 'value1'), ('header2', 'value2')])]
</code></pre> <h3 id="hashing"><a href="#hashing" class="header-anchor">#</a> Hashing</h3> <p>The hashing option controls which hashing algorithm should be used for generating the <code>hash</code> property. It doesn’t affect the <code>extract</code> function but can be used with the <code>Table</code> class:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/country-3.csv'</span><span class="token punctuation">,</span> hashing<span class="token operator">=</span><span class="token string">'sha256'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>hashing<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>stats<span class="token punctuation">[</span><span class="token string">'hash'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>sha256
408b5058f961915c1e1f3bc318ab01d7d094a4daccdf03ad6022cfc7b8ea4e3e
</code></pre> <h3 id="encoding"><a href="#encoding" class="header-anchor">#</a> Encoding</h3> <p>Frictionless automatically detects encoding of files but sometimes it can be innacurate. It’s possible to provide an encoding manually:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/country-3.csv'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>encoding<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>source<span class="token punctuation">)</span>
</code></pre></div><pre><code>utf-8
data/country-3.csv
</code></pre> <h3 id="compression"><a href="#compression" class="header-anchor">#</a> Compression</h3> <p>It’s possible to adjust compression detection by providing the algorithm explicitly. For the example below it’s not required as it would be detected anyway:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/table.csv.zip'</span><span class="token punctuation">,</span> compression<span class="token operator">=</span><span class="token string">'zip'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>compression<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>zip
[Row([('id', 1), ('name', 'english')]), Row([('id', 2), ('name', '中国人')])]
</code></pre> <h3 id="compression-path"><a href="#compression-path" class="header-anchor">#</a> Compression Path</h3> <p>By default, Frictionless uses the first file found in a zip archive. It’s possible to adjust this behaviour:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/table-multiple-files.zip'</span><span class="token punctuation">,</span> compression_path<span class="token operator">=</span><span class="token string">'table-reverse.csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>compression<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>compression_path<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>zip
table-reverse.csv
[Row([('id', 1), ('name', '中国人')]), Row([('id', 2), ('name', 'english')])]
</code></pre> <p>Further reading:</p> <ul><li>Schemes Reference</li> <li>Formats Reference</li></ul> <h2 id="file-control"><a href="#file-control" class="header-anchor">#</a> File Control</h2> <p>The Control object allows you to manage the loader used by the Table class. In most cases, you don’t need to provide any Control settings but sometimes it can be useful:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">from</span> frictionless<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>remote <span class="token keyword">import</span> RemoteControl
source <span class="token operator">=</span> <span class="token string">'https://raw.githubusercontent.com/frictionlessdata/frictionless-py/master/data/table.csv'</span>
control <span class="token operator">=</span> RemoteControl<span class="token punctuation">(</span>http_timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span>source<span class="token punctuation">,</span> control<span class="token operator">=</span>control<span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>control<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>{'httpTimeout': 10, 'newline': ''}
[Row([('id', 1), ('name', 'english')]), Row([('id', 2), ('name', '中国人')])]
</code></pre> <p>Exact parameters depend on schemes and can be found in the “Schemes Reference”. For example, the Remote Control provides <code>http_timeout</code>, <code>http_session</code>, and others but there is only one option available for all controls:</p> <h3 id="detect-encoding"><a href="#detect-encoding" class="header-anchor">#</a> Detect Encoding</h3> <p>It’s a function that can be provided to adjust the encoding detection. This function accepts a data sample and returns a detected encoding:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table<span class="token punctuation">,</span> Control
control <span class="token operator">=</span> Control<span class="token punctuation">(</span>detect_encoding<span class="token operator">=</span><span class="token keyword">lambda</span> sample<span class="token punctuation">:</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">&quot;data/capital-3.csv&quot;</span><span class="token punctuation">,</span> control<span class="token operator">=</span>control<span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>source<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>encoding<span class="token punctuation">)</span>
</code></pre></div><pre><code>data/capital-3.csv
utf-8
</code></pre> <p>Further reading:</p> <ul><li>Schemes Reference</li></ul> <h2 id="table-dialect"><a href="#table-dialect" class="header-anchor">#</a> Table Dialect</h2> <p>The Dialect adjusts the way tabular parsers work. The concept is similiar to the Control above. Let’s use the CSV Dialect to adjust the delimiter configuration:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">from</span> frictionless<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>csv <span class="token keyword">import</span> CsvDialect
source <span class="token operator">=</span> <span class="token string">'header1;header2\nvalue1;value2'</span>
dialect <span class="token operator">=</span> CsvDialect<span class="token punctuation">(</span>delimiter<span class="token operator">=</span><span class="token string">';'</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span>source<span class="token punctuation">,</span> scheme<span class="token operator">=</span><span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'csv'</span><span class="token punctuation">,</span> dialect<span class="token operator">=</span>dialect<span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>dialect<span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>{'delimiter': ';'}
[Row([('header1', 'value1'), ('header2', 'value2')])]
</code></pre> <p>There are a great deal of options available for different dialects that can be found in “Formats Reference”. We will list the properties that can be used with every dialect:</p> <h3 id="header"><a href="#header" class="header-anchor">#</a> Header</h3> <p>It’s a boolean flag wich deaults to <code>True</code> indicating whether the data has a header row or not. In the following example the header row will be treated as a data row:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table<span class="token punctuation">,</span> Dialect
dialect <span class="token operator">=</span> Dialect<span class="token punctuation">(</span>header<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> dialect<span class="token operator">=</span>dialect<span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>[]
[Row([('field1', 'id'), ('field2', 'name')]),
 Row([('field1', '1'), ('field2', 'London')]),
 Row([('field1', '2'), ('field2', 'Berlin')]),
 Row([('field1', '3'), ('field2', 'Paris')]),
 Row([('field1', '4'), ('field2', 'Madrid')]),
 Row([('field1', '5'), ('field2', 'Rome')])]
</code></pre> <h3 id="header-rows"><a href="#header-rows" class="header-anchor">#</a> Header Rows</h3> <p>If header is <code>True</code> which is default, this parameters indicates where to find the header row or header rows for a multiline header. Let’s see on example how the first two data rows can be treated as a part of a header:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table<span class="token punctuation">,</span> Dialect
dialect <span class="token operator">=</span> Dialect<span class="token punctuation">(</span>header_rows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> dialect<span class="token operator">=</span>dialect<span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>['id 1 2', 'name London Berlin']
[Row([('id 1 2', 3), ('name London Berlin', 'Paris')]),
 Row([('id 1 2', 4), ('name London Berlin', 'Madrid')]),
 Row([('id 1 2', 5), ('name London Berlin', 'Rome')])]
</code></pre> <h3 id="header-join"><a href="#header-join" class="header-anchor">#</a> Header Join</h3> <p>If there are multiple header rows which is managed by <code>header_rows</code> parameter, we can set a string to be a separator for a header’s cell join operation. Usually it’s very handy for some “fancy” Excel files. For the sake of simplicity, we will show on a CSV file:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table<span class="token punctuation">,</span> Dialect
dialect <span class="token operator">=</span> Dialect<span class="token punctuation">(</span>header_rows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> header_join<span class="token operator">=</span><span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> dialect<span class="token operator">=</span>dialect<span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>['id/1/2', 'name/London/Berlin']
[Row([('id/1/2', 3), ('name/London/Berlin', 'Paris')]),
 Row([('id/1/2', 4), ('name/London/Berlin', 'Madrid')]),
 Row([('id/1/2', 5), ('name/London/Berlin', 'Rome')])]
</code></pre> <h3 id="header-case"><a href="#header-case" class="header-anchor">#</a> Header Case</h3> <blockquote><p><em>New in version 3.23</em></p></blockquote> <p>By default a header is validated in a case sensitive mode. To disable this behaviour we can set the <code>header_case</code> parameter to <code>False</code>. This option is accepted by any Dialect and a dialect can be passed to <code>extract</code>, <code>validate</code> and other functions. Please note that it doesn’t affect a resulting header it only affects how it’s validated:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table<span class="token punctuation">,</span> Schema<span class="token punctuation">,</span> Field<span class="token punctuation">,</span> Dialect
dialect <span class="token operator">=</span> Dialect<span class="token punctuation">(</span>header_case<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
schema <span class="token operator">=</span> Schema<span class="token punctuation">(</span>fields<span class="token operator">=</span><span class="token punctuation">[</span>Field<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;ID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Field<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> dialect<span class="token operator">=</span>dialect<span class="token punctuation">,</span> schema<span class="token operator">=</span>schema<span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Header: </span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Valid: </span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">.</span>valid<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>  <span class="token comment"># without &quot;header_case&quot; it will have 2 errors</span>
</code></pre></div><pre><code>Header: ['id', 'name']
Valid: True
</code></pre> <p>Further reading:</p> <ul><li>Formats Reference</li></ul> <h2 id="table-query"><a href="#table-query" class="header-anchor">#</a> Table Query</h2> <p>Using header management described in the “Table Dialect” section we can have a basic skipping rows ability e.g. if we set <code>dialect.header_rows=[2]</code> we will skip the first row but it’s very limited. There is a much more powerful interface called Table Queries to indicate where exactly to get tabular data from a file. We will use a simple file looking like a matrix:</p> <div class="language-python extra-class"><pre class="language-python"><code>! cat data<span class="token operator">/</span>matrix<span class="token punctuation">.</span>csv
</code></pre></div><pre><code>f1,f2,f3,f4
11,12,13,14
21,22,23,24
31,32,33,34
41,42,43,44
</code></pre> <h3 id="pick-skip-fields"><a href="#pick-skip-fields" class="header-anchor">#</a> Pick/Skip Fields</h3> <p>We can pick and skip arbitrary fields based on a header row. These options accept a list of field numbers, a list of strings or a regex to match. All the queries below do the same thing for this file:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> extract<span class="token punctuation">,</span> Query
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>pick_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>skip_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>pick_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'f2'</span><span class="token punctuation">,</span> <span class="token string">'f3'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>skip_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'f1'</span><span class="token punctuation">,</span> <span class="token string">'f4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>pick_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'&lt;regex&gt;f[23]'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>skip_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'&lt;regex&gt;f[14]'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>[Row([('f2', 12), ('f3', 13)]), Row([('f2', 22), ('f3', 23)]), Row([('f2', 32), ('f3', 33)]), Row([('f2', 42), ('f3', 43)])]
[Row([('f2', 12), ('f3', 13)]), Row([('f2', 22), ('f3', 23)]), Row([('f2', 32), ('f3', 33)]), Row([('f2', 42), ('f3', 43)])]
[Row([('f2', 12), ('f3', 13)]), Row([('f2', 22), ('f3', 23)]), Row([('f2', 32), ('f3', 33)]), Row([('f2', 42), ('f3', 43)])]
[Row([('f2', 12), ('f3', 13)]), Row([('f2', 22), ('f3', 23)]), Row([('f2', 32), ('f3', 33)]), Row([('f2', 42), ('f3', 43)])]
[Row([('f2', 12), ('f3', 13)]), Row([('f2', 22), ('f3', 23)]), Row([('f2', 32), ('f3', 33)]), Row([('f2', 42), ('f3', 43)])]
[Row([('f2', 12), ('f3', 13)]), Row([('f2', 22), ('f3', 23)]), Row([('f2', 32), ('f3', 33)]), Row([('f2', 42), ('f3', 43)])]
</code></pre> <h3 id="limit-offset-fields"><a href="#limit-offset-fields" class="header-anchor">#</a> Limit/Offset Fields</h3> <p>There are two options that provide an ability to limit amount of fields similiar to SQL’s directives:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> extract<span class="token punctuation">,</span> Query
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>limit_fields<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>offset_fields<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>[Row([('f1', 11), ('f2', 12)]), Row([('f1', 21), ('f2', 22)]), Row([('f1', 31), ('f2', 32)]), Row([('f1', 41), ('f2', 42)])]
[Row([('f3', 13), ('f4', 14)]), Row([('f3', 23), ('f4', 24)]), Row([('f3', 33), ('f4', 34)]), Row([('f3', 43), ('f4', 44)])]
</code></pre> <h3 id="pick-skip-rows"><a href="#pick-skip-rows" class="header-anchor">#</a> Pick/Skip Rows</h3> <p>It’s alike the field counterparts but it will be compared to the first cell of a row. All the queries below do the same thing for this file but take into account that when picking we need to also pick a header row. In addition, there is special value <code>&lt;blank&gt;</code> that matches a row if it’s competely blank:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> extract<span class="token punctuation">,</span> Query
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>pick_rows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>skip_rows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>pick_rows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'f1'</span><span class="token punctuation">,</span> <span class="token string">'21'</span><span class="token punctuation">,</span> <span class="token string">'31'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>skip_rows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token string">'41'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>pick_rows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'&lt;regex&gt;(f1|[23]1)'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>skip_rows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'&lt;regex&gt;[14]1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>pick_rows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'&lt;blank&gt;'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>[Row([('f1', 21), ('f2', 22), ('f3', 23), ('f4', 24)]), Row([('f1', 31), ('f2', 32), ('f3', 33), ('f4', 34)])]
[Row([('f1', 21), ('f2', 22), ('f3', 23), ('f4', 24)]), Row([('f1', 31), ('f2', 32), ('f3', 33), ('f4', 34)])]
[Row([('f1', 21), ('f2', 22), ('f3', 23), ('f4', 24)]), Row([('f1', 31), ('f2', 32), ('f3', 33), ('f4', 34)])]
[Row([('f1', 21), ('f2', 22), ('f3', 23), ('f4', 24)]), Row([('f1', 31), ('f2', 32), ('f3', 33), ('f4', 34)])]
[Row([('f1', 21), ('f2', 22), ('f3', 23), ('f4', 24)]), Row([('f1', 31), ('f2', 32), ('f3', 33), ('f4', 34)])]
[Row([('f1', 21), ('f2', 22), ('f3', 23), ('f4', 24)]), Row([('f1', 31), ('f2', 32), ('f3', 33), ('f4', 34)])]
[]
</code></pre> <h3 id="limit-offset-rows"><a href="#limit-offset-rows" class="header-anchor">#</a> Limit/Offset Rows</h3> <p>This is a quite popular option used to limit amount of rows to read:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> extract<span class="token punctuation">,</span> Query
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>limit_rows<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>extract<span class="token punctuation">(</span><span class="token string">'data/matrix.csv'</span><span class="token punctuation">,</span> query<span class="token operator">=</span>Query<span class="token punctuation">(</span>offset_rows<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>[Row([('f1', 11), ('f2', 12), ('f3', 13), ('f4', 14)]), Row([('f1', 21), ('f2', 22), ('f3', 23), ('f4', 24)])]
[Row([('f1', 31), ('f2', 32), ('f3', 33), ('f4', 34)]), Row([('f1', 41), ('f2', 42), ('f3', 43), ('f4', 44)])]
</code></pre> <h2 id="header-options"><a href="#header-options" class="header-anchor">#</a> Header Options</h2> <p>Header management is a responsibility of “Table Dialect” which will be described below but Table accept a special <code>headers</code> argument that plays a role of a high-level helper in setting different header options.</p> <p>It accepts a <code>False</code> values indicating that there is no header row:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
    pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
    pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>[]
[Row([('field1', 'id'), ('field2', 'name')]),
 Row([('field1', '1'), ('field2', 'London')]),
 Row([('field1', '2'), ('field2', 'Berlin')]),
 Row([('field1', '3'), ('field2', 'Paris')]),
 Row([('field1', '4'), ('field2', 'Madrid')]),
 Row([('field1', '5'), ('field2', 'Rome')])]
</code></pre> <p>It accepts an integer indicating the header row number:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
    pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
    pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>['1', 'London']
[Row([('1', 2), ('London', 'Berlin')]),
 Row([('1', 3), ('London', 'Paris')]),
 Row([('1', 4), ('London', 'Madrid')]),
 Row([('1', 5), ('London', 'Rome')])]
</code></pre> <p>It accepts a list of integers indicating a multiline header row numbers:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
    pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
    pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>['id 1 2', 'name London Berlin']
[Row([('id 1 2', 3), ('name London Berlin', 'Paris')]),
 Row([('id 1 2', 4), ('name London Berlin', 'Madrid')]),
 Row([('id 1 2', 5), ('name London Berlin', 'Rome')])]
</code></pre> <p>It accepts a pair containing a list of integers indicating a multiline header row numbers and a string indicating a joiner for a concatenate operation:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
    pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
    pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>['id/1/2', 'name/London/Berlin']
[Row([('id/1/2', 3), ('name/London/Berlin', 'Paris')]),
 Row([('id/1/2', 4), ('name/London/Berlin', 'Madrid')]),
 Row([('id/1/2', 5), ('name/London/Berlin', 'Rome')])]
</code></pre> <h2 id="schema-options"><a href="#schema-options" class="header-anchor">#</a> Schema Options</h2> <p>By default, a schema for a table is inferred under the hood but we can also pass it explicitly.</p> <h3 id="schema"><a href="#schema" class="header-anchor">#</a> Schema</h3> <p>The most common way is providing a schema argument to the Table constructor. For example, let’s make the <code>id</code> field be a string instead of an integer:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table<span class="token punctuation">,</span> Schema<span class="token punctuation">,</span> Field
schema <span class="token operator">=</span> Schema<span class="token punctuation">(</span>fields<span class="token operator">=</span><span class="token punctuation">[</span>Field<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Field<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> schema<span class="token operator">=</span>schema<span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>schema<span class="token punctuation">)</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>{'fields': [{'name': 'id', 'type': 'string'},
            {'name': 'name', 'type': 'string'}]}
[Row([('id', '1'), ('name', 'London')]),
 Row([('id', '2'), ('name', 'Berlin')]),
 Row([('id', '3'), ('name', 'Paris')]),
 Row([('id', '4'), ('name', 'Madrid')]),
 Row([('id', '5'), ('name', 'Rome')])]
</code></pre> <h3 id="sync-schema"><a href="#sync-schema" class="header-anchor">#</a> Sync Schema</h3> <p>There is a way to sync provided schema based on a header row’s field order. It’s very useful when you have a schema that describes a subset or a superset of the table’s fields:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table<span class="token punctuation">,</span> Schema<span class="token punctuation">,</span> Field
<span class="token comment"># Note the order of the fields</span>
schema <span class="token operator">=</span> Schema<span class="token punctuation">(</span>fields<span class="token operator">=</span><span class="token punctuation">[</span>Field<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Field<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> schema<span class="token operator">=</span>schema<span class="token punctuation">,</span> sync_schema<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>schema<span class="token punctuation">)</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>{'fields': [{'name': 'id', 'type': 'string'},
            {'name': 'name', 'type': 'string'}]}
[Row([('id', '1'), ('name', 'London')]),
 Row([('id', '2'), ('name', 'Berlin')]),
 Row([('id', '3'), ('name', 'Paris')]),
 Row([('id', '4'), ('name', 'Madrid')]),
 Row([('id', '5'), ('name', 'Rome')])]
</code></pre> <h3 id="patch-schema"><a href="#patch-schema" class="header-anchor">#</a> Patch Schema</h3> <p>Sometimes we just want to update only a few fields or some schema’s properties without providing a brand new schema. For example, the two examples above can be simplified as:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> patch_schema<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'fields'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>schema<span class="token punctuation">)</span>
  pprint<span class="token punctuation">(</span>table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>{'fields': [{'name': 'id', 'type': 'string'},
            {'name': 'name', 'type': 'string'}]}
[Row([('id', '1'), ('name', 'London')]),
 Row([('id', '2'), ('name', 'Berlin')]),
 Row([('id', '3'), ('name', 'Paris')]),
 Row([('id', '4'), ('name', 'Madrid')]),
 Row([('id', '5'), ('name', 'Rome')])]
</code></pre> <h2 id="integrity-options"><a href="#integrity-options" class="header-anchor">#</a> Integrity Options</h2> <p>Exctraction function and classes accepts a few options that are needed to manage integrity behaviour:</p> <h3 id="on-error"><a href="#on-error" class="header-anchor">#</a> On Error</h3> <p>This option accept one of the three possible values configuring an <code>extract</code>, <code>Table</code>, <code>Resource</code> or <code>Package</code> behaviour if there is an error during the row reading process:</p> <ul><li>ignore (default)</li> <li>warn</li> <li>raise</li></ul> <p>Let’s investigate how we can add warnings on all header/row errors:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
schema <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token keyword">with</span>  Table<span class="token punctuation">(</span>data<span class="token punctuation">,</span> schema<span class="token operator">=</span>schema<span class="token punctuation">,</span> onerror<span class="token operator">=</span><span class="token string">&quot;warn&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  table<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><pre><code>/home/roll/projects/frictionless-py/frictionless/table.py:771: UserWarning: The cell &quot;1&quot; in row at position &quot;2&quot; and field &quot;name&quot; at position &quot;1&quot; has incompatible type: type is &quot;string/default&quot;
  warnings.warn(error.message, UserWarning)
/home/roll/projects/frictionless-py/frictionless/table.py:771: UserWarning: The cell &quot;2&quot; in row at position &quot;3&quot; and field &quot;name&quot; at position &quot;1&quot; has incompatible type: type is &quot;string/default&quot;
  warnings.warn(error.message, UserWarning)
/home/roll/projects/frictionless-py/frictionless/table.py:771: UserWarning: The cell &quot;3&quot; in row at position &quot;4&quot; and field &quot;name&quot; at position &quot;1&quot; has incompatible type: type is &quot;string/default&quot;
  warnings.warn(error.message, UserWarning)
</code></pre> <p>In some cases, we need to fail on the first error. We will use <code>raise</code> for it:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
schema <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
resource <span class="token operator">=</span> Resource<span class="token punctuation">(</span>data<span class="token operator">=</span>data<span class="token punctuation">,</span> schema<span class="token operator">=</span>schema<span class="token punctuation">)</span>
resource<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token string">'raise'</span> <span class="token comment"># for Resource/Package it's possible to set this property after initialization</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
  resource<span class="token punctuation">.</span>read_rows<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> exception<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span>
</code></pre></div><pre><code>[type-error] The cell &quot;1&quot; in row at position &quot;2&quot; and field &quot;name&quot; at position &quot;1&quot; has incompatible type: type is &quot;string/default&quot;
</code></pre> <h3 id="lookup"><a href="#lookup" class="header-anchor">#</a> Lookup</h3> <p>The lookup is a special object providing relational information in cases when it’s not possible to extract. For example, the Package is capable of getting a lookup object from its resource while a table object needs it to be provided. Let’s see an example:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
source <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
lookup <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;other&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
fk <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;reference&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;resource&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;other&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">with</span> Table<span class="token punctuation">(</span>source<span class="token punctuation">,</span> lookup<span class="token operator">=</span>lookup<span class="token punctuation">,</span> patch_schema<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;foreignKeys&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>fk<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> table<span class="token punctuation">:</span>
        <span class="token keyword">if</span> row<span class="token punctuation">.</span>row_number <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>
            <span class="token keyword">assert</span> row<span class="token punctuation">.</span>valid <span class="token keyword">is</span> <span class="token boolean">False</span>
            <span class="token keyword">assert</span> row<span class="token punctuation">.</span>errors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token string">&quot;foreign-key-error&quot;</span>
            <span class="token keyword">continue</span>
        <span class="token keyword">assert</span> row<span class="token punctuation">.</span>valid
</code></pre></div><h2 id="header-object"><a href="#header-object" class="header-anchor">#</a> Header Object</h2> <p>After opening a table or calling <code>resource.read_header</code> you get access to a <code>header</code> object. It’s a list but providing some additional functionality. Let’s take a look:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Header: </span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Schema: </span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">.</span>schema<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Field Positions: </span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">.</span>field_positions<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Errors: </span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">.</span>errors<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Valid: </span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">.</span>valid<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'As Dict: </span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">.</span>to_dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span> <span class="token comment"># field name: header cell</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'As List: </span><span class="token interpolation"><span class="token punctuation">{</span>table<span class="token punctuation">.</span>header<span class="token punctuation">.</span>to_list<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</code></pre></div><pre><code>Header: ['id', 'name']
Schema: {'fields': [{'name': 'id', 'type': 'integer'}, {'name': 'name', 'type': 'string'}]}
Field Positions: [1, 2]
Errors: []
Valid: True
As Dict: {'id': 'id', 'name': 'name'}
As List: ['id', 'name']
</code></pre> <p>The example above covers the case when a header is valid. For a header with tabular errors this information can be much more useful revealing discrepancies, duplicates or missing cells information. Please read “API Reference” for more details.</p> <h2 id="row-object"><a href="#row-object" class="header-anchor">#</a> Row Object</h2> <p>The <code>extract</code>, <code>resource.read_rows()</code>, <code>table.read_rows()</code>, and many other functions return or yeild row objects. It’s an <code>OrderedDict</code> providing additional API shown below:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> frictionless <span class="token keyword">import</span> Table
<span class="token keyword">with</span> Table<span class="token punctuation">(</span><span class="token string">'data/capital-3.csv'</span><span class="token punctuation">,</span> patch_schema<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'missingValues'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> table<span class="token punctuation">:</span>
  <span class="token keyword">for</span> row <span class="token keyword">in</span> table<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Row: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Schema: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>schema<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Field Positions: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>field_positions<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Row Position: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>row_position<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span> <span class="token comment"># physical line number starting from 1</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Row Number: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>row_number<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span> <span class="token comment"># counted row number starting from 1</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Blank Cells: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>blank_cells<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Error Cells: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>error_cells<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Errors: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>errors<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Valid: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>valid<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'As Dict: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>to_dict<span class="token punctuation">(</span>json<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'As List: </span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token punctuation">.</span>to_list<span class="token punctuation">(</span>json<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span> <span class="token comment"># JSON compatible data types</span>
    <span class="token keyword">break</span>
</code></pre></div><pre><code>Row: Row([('id', None), ('name', 'London')])
Schema: {'fields': [{'name': 'id', 'type': 'integer'}, {'name': 'name', 'type': 'string'}], 'missingValues': ['1']}
Field Positions: [1, 2]
Row Position: 2
Row Number: 1
Blank Cells: {'id': '1'}
Error Cells: {}
Errors: []
Valid: True
As Dict: {'id': None, 'name': 'London'}
As List: [None, 'London']
</code></pre> <p>As we can see, it provides a lot of information which is especially useful when a row is not valid. Our row is valid but we demostrated how it can preserve data about raw missing values. It also preserves data about all errored cells. Please read “API Reference” for more details.</p></div> <hr class="hor-line"> <footer data-v-35ae81c2><div class="banner footer-sb page-edit flex flex-row" data-v-35ae81c2><div class="container flex flex-row" data-v-35ae81c2><div class="container" data-v-35ae81c2><p data-v-35ae81c2>About</p> <ul data-v-35ae81c2><li data-v-35ae81c2><a href="/about/" data-v-35ae81c2>About</a></li> <li data-v-35ae81c2><a href="/team/" data-v-35ae81c2>Contact</a></li> <li data-v-35ae81c2><a href="https://okfn.org/privacy-policy/" data-v-35ae81c2>Privacy Policy</a></li> <li data-v-35ae81c2><a href="https://okfn.org/terms-of-use/" data-v-35ae81c2>Terms of Use</a></li></ul></div> <div class="container" data-v-35ae81c2><p data-v-35ae81c2>Help</p> <ul data-v-35ae81c2><li data-v-35ae81c2><a href="/contribute/" data-v-35ae81c2>Support</a></li> <li data-v-35ae81c2><a href="/guide/" data-v-35ae81c2>Get started</a></li> <li data-v-35ae81c2><a href="https://discordapp.com/invite/Sewv6av" data-v-35ae81c2>Community</a></li></ul></div> <div class="container" data-v-35ae81c2><p data-v-35ae81c2>More</p> <ul data-v-35ae81c2><li data-v-35ae81c2><a href="/reproducible-research/" data-v-35ae81c2>Reproducible Research</a></li> <li data-v-35ae81c2><a href="/design/" data-v-35ae81c2>Design Assets</a></li> <li data-v-35ae81c2><a href="/blog/" data-v-35ae81c2>Blog</a></li></ul></div></div></div></footer> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/frictionlessdata/website-v2/edit/master/site/tooling/python/extracting-data/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/2/2020, 11:16:38 AM</span></div></footer> <!----> </main></div> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.dac55d52.js" defer></script><script src="/assets/js/5.ac1a1d5f.js" defer></script><script src="/assets/js/2.66881210.js" defer></script><script src="/assets/js/136.872f9580.js" defer></script>
  </body>
</html>
